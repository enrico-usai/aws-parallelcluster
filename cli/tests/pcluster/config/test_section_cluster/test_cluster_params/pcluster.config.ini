[global]
cluster_template = {{ settings_label }}
update_check = true
# set sanity_check to false to not fail on validation
sanity_check = false

[aws]
aws_secret_access_key = fake1
aws_access_key_id = fake1
aws_region_name = us-east-2

[aliases]

[cluster default]
# all defaults

[cluster custom1]
key_name = key
template_url = https://template
base_os = ubuntu1404
scheduler = slurm
shared_dir = /test
placement_group = NONE
placement = cluster
master_instance_type = t2.large
master_root_volume_size = 30
compute_instance_type = t2.large
compute_root_volume_size = 30
initial_queue_size = 1
max_queue_size = 2
maintain_initial_size = true
cluster_type = spot
spot_price = 5
proxy_server = proxy
ec2_iam_role = role
s3_read_resource = s3://url
s3_read_write_resource = s3://url
enable_efa = compute
ephemeral_dir = /test2
encrypted_ephemeral = true
custom_ami = ami-12345678
pre_install = preinstall
pre_install_args = "one two"
post_install = postinstall
post_install_args = "one two"
extra_json = { "cluster" : { "cfn_scheduler_slots" : "cores" } }
additional_cfn_template = https://test
tags = {"test": "test"}
custom_chef_cookbook = https://test
custom_awsbatch_template_url = https://test
#scaling_settings = settings1
vpc_settings = default
#ebs_settings
#efs_settings
#raid_settings
#fsx_settings

[scaling scaling1]
scaledown_idletime = 20

[vpc vpc1]
vpc_id = vpc-12345678
master_subnet_id = subnet-12345678
ssh_from = 0.0.0.0/32
additional_sg = sg-12345678
compute_subnet_id = subnet-234567893
compute_subnet_cidr = 0.0.0.0/32
use_public_ips = false
vpc_security_group_id = sg-12345678

[cluster batch]
scheduler = awsbatch

[cluster batch-custom1]
scheduler = awsbatch
cluster_type = spot
initial_queue_size = 1
max_queue_size = 2
maintain_initial_size = true
min_vcpus = 2
desired_vcpus = 3
max_vcpus = 4
spot_price = 5
spot_bid_percentage = 0.25

[cluster wrong_mix_traditional]
scheduler = slurm
cluster_type = spot
initial_queue_size = 1
max_queue_size = 2
maintain_initial_size = true
min_vcpus = 2
desired_vcpus = 3
max_vcpus = 4
spot_price = 5
spot_bid_percentage = 0.25

[cluster wrong_mix_batch]
scheduler = awsbatch
cluster_type = spot
initial_queue_size = 1
max_queue_size = 2
maintain_initial_size = true
min_vcpus = 2
desired_vcpus = 3
max_vcpus = 4
spot_price = 5
spot_bid_percentage = 0.25

[cluster vpc]
vpc_settings = default

[cluster ebs1]
vpc_settings = default
ebs_settings = ebs1

[cluster ebs2]
vpc_settings = default
ebs_settings = ebs1,ebs2

[cluster efs]
vpc_settings = default
efs_settings = default

[vpc default]
vpc_id = vpc-12345678
master_subnet_id = subnet-12345678

[ebs ebs1]
shared_dir = ebs1
volume_type = io1
volume_size = 40
volume_iops = 200
encrypted = true
ebs_kms_key_id = kms_key
ebs_volume_id = vol-12345678

[ebs ebs2]
shared_dir = ebs2
volume_type = standard
volume_size = 30
volume_iops = 300
encrypted = false

[efs default]
shared_dir = efs

